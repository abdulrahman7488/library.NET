
@{
    ViewBag.Title = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<div class="book-details-container" style="padding: 20px; font-family: Arial, sans-serif;">
    <div class="book-header" style="display: flex; justify-content: space-between; align-items: center;">
        <h1 style="font-size: 2em; color: #333;">@Model.Title</h1>
    </div>

    <div class="book-content" style="display: flex; margin-top: 20px;">

        <!-- قسم صورة الكتاب -->
        <div class="book-image" style="flex: 1; margin-right: 20px;">
            <img src="@Url.Content(string.IsNullOrEmpty(Model.ImagePath) ? "~/Images/placeholder.png" : Model.ImagePath)" alt="@Model.Title" style="width: 100%; max-width: 300px; border: 1px solid #ddd;">
        </div>

        <!-- قسم تفاصيل الكتاب -->
        <div class="book-info" style="flex: 2;">
            <p style="font-size: 1.2em;"><strong>الكاتب:</strong> @Model.Author</p>
            <p style="font-size: 1.2em;"><strong>الفئة:</strong> @Model.Category.CategoryName</p>
            <p style="font-size: 1.2em; margin-top: 20px;"><strong>الوصف:</strong>@Model.Description</p>

            <!-- إضافة زر إذا كنت تريد دمج عمليات أخرى -->
            <div style="margin-top: 30px;">
                <button type="button" class="add-to-cart" data-product-id="@Model.BookID">
                    Add to Cart
                </button>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).on('click', '.add-to-cart', function() {
        var productId = $(this).data('product-id');

        $.ajax({
            url: '@Url.Action("AddToCart", "Home")',
            type: 'POST',
            data: { id: productId },
            success: function(response) {
                if (response.success) {
                    // توجيه المستخدم إلى صفحة العربة
                    window.location.href = '@Url.Action("Index", "CartItems")';
                } else {
                    alert("Failed to add product to cart.");
                }
            },
            error: function() {
                alert("An error occurred.");
            }
        });
    });
</script>