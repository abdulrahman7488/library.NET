@model IEnumerable<Bookshop1.Models.CartItem>

@{
    ViewBag.Title = "CartItems";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Your Shopping Cart</h2>

    @if (!Model.Any())
    {
<div class="alert alert-warning text-center">
    Your cart is empty! Browse our <a href="@Url.Action("Index", "Books")" class="alert-link">book collection</a> to add items.
</div> }
            else
            {
<table class="table table-bordered table-hover">
    <thead class="thead-dark">
        <tr>
            <th>Quantity</th>
            <th>Price</th>
            <th>Book Title</th>
            <th>Total</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>
            <td><span class="quantity">@item.Quantity</span></td>
            <td><span class="price">@String.Format("{0:C}", item.Price)</span></td>
            <td>@Html.DisplayFor(modelItem => item.Title)</td>
            <td><span class="total-price">@String.Format("{0:C}", item.Quantity * item.Price)</span></td>
            <td>
                <a class="btn btn-info btn-sm m-1" href="@Url.Action("Details", "Books", new { id = item.BookID })">
                    <i class="fas fa-info-circle"></i> View Details
                </a>

                @using (Html.BeginForm("Delete", "CartItems", new { id = item.CartItemID }, FormMethod.Post, new { onsubmit = "return confirm('Are you sure you want to delete this item?');" }))
                {
            @Html.AntiForgeryToken() <!-- يجب إضافة هذه النقطة -->
                                    <button type="submit" class="btn btn-danger">Delete</button>}
            </td>
        </tr>                }
            </tbody>
        </table>

                        }
        </div>

<!-- Custom styles -->
<style>
    .quantity, .price, .total-price {
        font-weight: bold;
        font-size: 1.1em;
    }

    .table {
        margin-top: 20px;
    }

        .table th, .table td {
            vertical-align: middle;
            text-align: center;
        }

    .btn {
        font-size: 0.9em;
    }
</style>

